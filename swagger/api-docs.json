{"openapi":"3.0.1","info":{"title":"Почтовое отслеживание","description":"В системе реализована регистрация почтовых отправлений — письма, посылки — их передвижение между почтовыми отделениями, а также возможность получения информации и всей истории передвижения конкретного почтового отправления.","contact":{"name":"Ilya Shubin"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"paths":{"/office":{"post":{"tags":["Почтовое отделение"],"summary":"Создание почтового отделения","operationId":"createPostOffice","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostOffice"}}},"required":true},"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PostOffice"}}}}}}},"/mailing":{"post":{"tags":["Почтовое отправление"],"summary":"Регистрация почтового отправления","operationId":"createMailing","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MailingDto"}}},"required":true},"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MailingDto"}}}}}}},"/mailing/departure/{mailingId}/office/{officeId}":{"patch":{"tags":["Почтовое отправление"],"summary":"Убытие в промежуточном почтовом отделение","operationId":"approveDeparture","parameters":[{"name":"mailingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"officeId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Tracking"}}}}}}},"/mailing/completion/{mailingId}":{"patch":{"tags":["Почтовое отправление"],"summary":"Получение адресатом","operationId":"completionMailing","parameters":[{"name":"mailingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Tracking"}}}}}}},"/mailing/approve/{mailingId}/office/{officeId}":{"patch":{"tags":["Почтовое отправление"],"summary":"Подтверждение прибытия в промежуточное почтовое отделение","operationId":"approveArrival","parameters":[{"name":"mailingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"officeId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Tracking"}}}}}}},"/tracking/{mailingId}":{"get":{"tags":["Отслеживание почтового отправления"],"summary":"Полная история движения почтового отправления отсортированная по последнему событию","operationId":"getInfoByMailingId","parameters":[{"name":"mailingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Tracking"}}}}}}}},"/tracking/{mailingId}/status":{"get":{"tags":["Отслеживание почтового отправления"],"summary":"Просмотр статуса почтового отправления","operationId":"getTrackingStatusByMailingId","parameters":[{"name":"mailingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TrackingDto"}}}}}}}},"components":{"schemas":{"ErrorResponse":{"type":"object","properties":{"status":{"type":"string"},"reason":{"type":"string"},"message":{"type":"string"},"timestamp":{"type":"string","format":"date-time"}}},"PostOffice":{"required":["addressOffice","indexOffice","nameOffice"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"indexOffice":{"type":"string"},"nameOffice":{"type":"string"},"addressOffice":{"type":"string"}},"description":"Сущность почтового отделения"},"MailingDto":{"required":["addressRecipient","indexRecipient","nameRecipient","type"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"type":{"type":"string","enum":["LETTER","PACKAGE","PARCEL","POSTCARD"]},"indexRecipient":{"type":"string"},"addressRecipient":{"type":"string"},"nameRecipient":{"type":"string"}}},"Mailing":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"type":{"type":"string","enum":["LETTER","PACKAGE","PARCEL","POSTCARD"]},"indexRecipient":{"type":"string"},"addressRecipient":{"type":"string"},"nameRecipient":{"type":"string"}},"description":"Сущность почтового отправления"},"Tracking":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"mailing":{"$ref":"#/components/schemas/Mailing"},"postOffice":{"$ref":"#/components/schemas/PostOffice"},"status":{"type":"string","enum":["ARRIVED","DEPARTURE","NO_DATA","DELIVERED"]},"created":{"type":"string","format":"date-time"}},"description":"Сущность отслеживания отправления"},"TrackingDto":{"type":"object","properties":{"status":{"type":"string","enum":["ARRIVED","DEPARTURE","NO_DATA","DELIVERED"]},"created":{"type":"string","format":"date-time"}},"description":"Статус почтового отправления"}}}}